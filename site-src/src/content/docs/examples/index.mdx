---
title: EXAMPLES
description: Example capsules and usage patterns
---

## Overview

This section provides example capsules for testing, learning, and reference implementations.

:::note[Informative âŸ‚]
All examples are available as JSON files at `/examples/` and can be used for:

- Learning the capsule structure
- Testing implementations
- Validating schema compliance
- Understanding edge cases
:::

---

## Minimal Example {#minimal}

The simplest valid capsule with only required fields.

```json
{
  "spec_version": "v1",
  "schema_version": "1.0.0",
  "capsule_id": "a1b2c3d4e5f67890.../550e8400-e29b-41d4-a716-446655440000",
  "created_at": "2024-01-15T10:00:00Z",
  "aead": "xchacha20-poly1305",
  "kdf": {
    "algorithm": "argon2id",
    "salt": "YmFzZTY0dXJsLWVuY29kZWQ",
    "memory_kb": 65536,
    "iterations": 3,
    "parallelism": 4
  },
  "artifacts": [
    {
      "path": "MEMORY.md",
      "kind": "memory",
      "mode": "private",
      "plaintext_hash": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "size_bytes": 256,
      "blob_id": "abc123def456..."
    }
  ],
  "blobs": [
    {
      "blob_id": "abc123def456...",
      "ciphertext_hash": "abc123def456...",
      "ciphertext_size_bytes": 288,
      "nonce": "YmFzZTY0dXJsLW5vbmNl",
      "storage": {
        "backend": "local",
        "ref": "/capsules/abc123/blobs/abc123def456"
      }
    }
  ],
  "signature": {
    "algorithm": "ecdsa-secp256k1",
    "public_key": "YmFzZTY0dXJsLXB1YmxpYy1rZXk",
    "signature": "YmFzZTY0dXJsLXNpZ25hdHVyZQ",
    "signed_at": "2024-01-15T10:00:01Z"
  }
}
```

**Key points:**
- Single artifact (MEMORY.md)
- Single blob
- Minimal required fields only

---

## Typical Example {#typical}

A more realistic capsule with multiple artifacts and common patterns.

```json
{
  "spec_version": "v1",
  "schema_version": "1.0.0",
  "capsule_id": "owner_fingerprint/uuid-v7",
  "created_at": "2024-01-15T10:00:00Z",
  "aead": "xchacha20-poly1305",
  "kdf": {
    "algorithm": "argon2id",
    "salt": "...",
    "memory_kb": 65536,
    "iterations": 3,
    "parallelism": 4
  },
  "artifacts": [
    {
      "path": "MEMORY.md",
      "kind": "memory",
      "mode": "private",
      "plaintext_hash": "...",
      "size_bytes": 2048,
      "blob_id": "blob1..."
    },
    {
      "path": "SOUL.md",
      "kind": "persona",
      "mode": "private",
      "plaintext_hash": "...",
      "size_bytes": 512,
      "blob_id": "blob2..."
    },
    {
      "path": "memory/notes.md",
      "kind": "memory",
      "mode": "private",
      "plaintext_hash": "...",
      "size_bytes": 4096,
      "blob_id": "blob3..."
    },
    {
      "path": ".cursor/rules/project.md",
      "kind": "config",
      "mode": "private",
      "plaintext_hash": "...",
      "size_bytes": 1024,
      "blob_id": "blob4..."
    }
  ],
  "blobs": [
    {"blob_id": "blob1...", "...": "..."},
    {"blob_id": "blob2...", "...": "..."},
    {"blob_id": "blob3...", "...": "..."},
    {"blob_id": "blob4...", "...": "..."}
  ],
  "access": {
    "owner": "ecdsa:owner_address",
    "readers": [],
    "public": false
  },
  "compression": {
    "enabled": true,
    "algorithm": "7z",
    "level": 9,
    "original_size_bytes": 7680,
    "compressed_size_bytes": 2048,
    "compression_ratio": 0.27
  },
  "signature": {
    "algorithm": "ecdsa-secp256k1",
    "public_key": "...",
    "signature": "...",
    "signed_at": "2024-01-15T10:00:01Z"
  }
}
```

**Features demonstrated:**
- Multiple artifacts with different kinds
- Access control configuration
- Compression enabled
- Real-world file structure

---

## Flows {#flows}

### Export Flow

```bash
# 1. Initialize identity (first time only)
namnesis genesis

# 2. Imprint workspace (export + upload + chain update)
namnesis imprint \
  --workspace ./my-agent-workspace \
  --soul-id <YOUR_SOUL_ID>

# Output:
# Capsule ID: abc123.../550e8400-...
# Artifacts: 12
# Compressed: 7680 -> 2048 bytes (73% reduction)
# Upload complete.
```

### Import Flow

```bash
# Recall to new location (download + verify + restore)
namnesis recall \
  --capsule-id <CAPSULE_ID> \
  --to ./restored-workspace \
  --trusted-signer self

# Output:
# Signature verified: abc123...
# Artifacts restored: 12
# Restore complete.
```

---

## Failure Modes {#failure-modes}

### Invalid Schema

```json
{
  "spec_version": "v1",
  "capsule_id": "missing-required-fields"
}
```

**Error:** Schema validation failure - missing required fields

### Invalid Signature

```json
{
  "...": "...",
  "signature": {
    "algorithm": "ecdsa-secp256k1",
    "public_key": "valid-key",
    "signature": "invalid-signature-bytes",
    "signed_at": "2024-01-15T10:00:01Z"
  }
}
```

**Error:** Signature verification failed

### Untrusted Signer

```bash
namnesis recall \
  --capsule-id <CAPSULE_ID> \
  --to ./workspace \
  --trusted-signer different-fingerprint

# Error: Signer fingerprint does not match trusted signer
```

### Hash Mismatch

```json
{
  "artifacts": [{
    "path": "MEMORY.md",
    "plaintext_hash": "claimed-hash"
  }]
}
```

**Error:** Plaintext hash mismatch - possible tampering or corruption

---

## Downloading Examples

All examples are available at:

```bash
# Minimal
curl https://example.website/examples/minimal.json

# Typical
curl https://example.website/examples/typical.json
```

:::note
Example files include full valid capsule structures with placeholder hashes and signatures. They are for structural reference, not cryptographic verification.
:::
